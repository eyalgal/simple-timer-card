<!DOCTYPE html>
<html>
<head>
    <title>Simple Timer Card Logic Test</title>
    <style>
        body { 
            background: #1c1c1c; 
            color: white; 
            font-family: Arial, sans-serif; 
            padding: 20px; 
            margin: 0;
        }
        .test-result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
        }
        .pass { background: #1e4d1e; }
        .fail { background: #4d1e1e; }
    </style>
</head>
<body>
    <h1>Simple Timer Card Configuration Logic Test</h1>
    <div id="results"></div>

    <script>
        // Test the configuration parsing logic without requiring LitElement
        function testConfigParsing() {
            const results = [];
            
            // Test 1: fill_vertical parsing
            const testConfig1 = { style: "fill_vertical" };
            const rawStyle1 = (testConfig1.style || "bar").toLowerCase();
            let parsedStyle1;
            
            if (rawStyle1 === "fill_vertical" || rawStyle1 === "fill_horizontal") {
                parsedStyle1 = "fill";
            } else if (rawStyle1 === "bar_vertical" || rawStyle1 === "bar_horizontal") {
                parsedStyle1 = "bar"; 
            } else if (rawStyle1 === "circle") {
                parsedStyle1 = "circle";
            } else {
                parsedStyle1 = rawStyle1 === "fill" || rawStyle1 === "background" || rawStyle1 === "background_fill"
                    ? "fill"
                    : (rawStyle1 === "circle" ? "circle" : "bar");
            }
            
            const result1 = {
                test: "fill_vertical parsing",
                input: "fill_vertical", 
                expectedStyle: "fill",
                actualStyle: parsedStyle1,
                rawStylePreserved: rawStyle1,
                pass: parsedStyle1 === "fill" && rawStyle1 === "fill_vertical"
            };
            results.push(result1);
            
            // Test 2: bar_horizontal parsing  
            const testConfig2 = { style: "bar_horizontal" };
            const rawStyle2 = (testConfig2.style || "bar").toLowerCase();
            let parsedStyle2;
            
            if (rawStyle2 === "fill_vertical" || rawStyle2 === "fill_horizontal") {
                parsedStyle2 = "fill";
            } else if (rawStyle2 === "bar_vertical" || rawStyle2 === "bar_horizontal") {
                parsedStyle2 = "bar"; 
            } else if (rawStyle2 === "circle") {
                parsedStyle2 = "circle";
            } else {
                parsedStyle2 = rawStyle2 === "fill" || rawStyle2 === "background" || rawStyle2 === "background_fill"
                    ? "fill"
                    : (rawStyle2 === "circle" ? "circle" : "bar");
            }
            
            const result2 = {
                test: "bar_horizontal parsing",
                input: "bar_horizontal",
                expectedStyle: "bar", 
                actualStyle: parsedStyle2,
                rawStylePreserved: rawStyle2,
                pass: parsedStyle2 === "bar" && rawStyle2 === "bar_horizontal"
            };
            results.push(result2);
            
            // Test 3: Layout determination from raw style
            const getActiveTimersLayout = (rawConfigStyle) => {
                const rawStyle = (rawConfigStyle || "bar").toLowerCase();
                if (rawStyle === "fill_vertical" || rawStyle === "bar_vertical") {
                    return "vertical";
                } else if (rawStyle === "fill_horizontal" || rawStyle === "bar_horizontal") {
                    return "horizontal";
                } else if (rawStyle === "circle") {
                    return "vertical";
                } else {
                    return "horizontal";
                }
            };
            
            const layout1 = getActiveTimersLayout(rawStyle1);
            const layout2 = getActiveTimersLayout(rawStyle2);
            
            const result3 = {
                test: "Layout determination",
                input: `fill_vertical -> ${layout1}, bar_horizontal -> ${layout2}`,
                expected: "vertical, horizontal",
                actual: `${layout1}, ${layout2}`,
                pass: layout1 === "vertical" && layout2 === "horizontal"
            };
            results.push(result3);
            
            return results;
        }
        
        // Run tests and display results
        const testResults = testConfigParsing();
        const resultsDiv = document.getElementById('results');
        
        testResults.forEach(result => {
            const div = document.createElement('div');
            div.className = `test-result ${result.pass ? 'pass' : 'fail'}`;
            div.innerHTML = `
                <strong>${result.test}:</strong> ${result.pass ? 'PASS' : 'FAIL'}<br>
                Input: ${result.input}<br>
                Expected: ${result.expected || result.expectedStyle}<br>
                Actual: ${result.actual || result.actualStyle}<br>
                ${result.rawStylePreserved ? `Raw Style: ${result.rawStylePreserved}` : ''}
            `;
            resultsDiv.appendChild(div);
        });
        
        const allPassed = testResults.every(r => r.pass);
        const summary = document.createElement('div');
        summary.className = `test-result ${allPassed ? 'pass' : 'fail'}`;
        summary.innerHTML = `<strong>Summary:</strong> ${allPassed ? 'All tests passed!' : 'Some tests failed!'}`;
        resultsDiv.appendChild(summary);
    </script>
</body>
</html>